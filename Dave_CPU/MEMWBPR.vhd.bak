library ieee;
use ieee.std_logic_1164.all;

entity MEMWBPR is
port(clk, RegWrite_in, MemToReg_in: in std_logic;
	WriteReg_in: std_logic_vector(4 downto 0);
	ReadData_in, ALURes_in: in std_logic_vector(31 downto 0);
	RegWrite_out, MemToReg_out: out std_logic;
	WriteReg_out: out std_logic_vector(4 downto 0);
	ReadData_out, ALURes_out: out std_logic_vector(31 downto 0));
end MEMWBPR;

architecture beh of MEMWBPR is
signal WBCTRLData: std_logic_vector(1 downto 0);
signal HData, DData: std_logic_vector(32 downto 0);
signal BData: std_logic_vector(4 downto 0);
begin
	process(CLK)
	begin
		if CLK'event and CLK='1' then
			WBCTRLData <= WBCTRLIN;
			HData <= HIN;
			DData <= DIN;
			BData <= BIN;
		end if;
		if CLK'event and CLK='0' then
			WBCTRLOUT <= WBCTRLData;
			HOUT <= HData;
			DOUT <= DData;
			BOUT <= BData;
		end if;
	end process;
end beh;